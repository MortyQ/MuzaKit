/**
 * ğŸ¨ Glassmorphism & Gradient Utilities (PERFORMANCE OPTIMIZED)
 *
 * Uses "Fake Glass" technique: High opacity + borders instead of costly backdrop-filter.
 * Usage: @apply glass; or class="glass"
 */

@layer utilities {
  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     FAKE GLASSMORPHISM (60 FPS SCROLL)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  /**
   * Light glass effect
   * High opacity (95%) mimics frosted glass without calculation overhead
   */
  .glass-light {
    @apply bg-base-100/95 border border-base-300/50;
    transform: translateZ(0); /* Hardware acceleration */
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.08);
  }

  /**
   * Dark glass effect
   */
  .glass-dark {
    @apply bg-base-200/95 border border-base-300/30;
    transform: translateZ(0);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  }

  /**
   * Auto glass - adapts to theme
   * This is your main utility. Optimized for scroll performance.
   */
  .glass {
    @apply bg-base-100/95 border border-base-300/50;
    transform: translateZ(0);
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.08);

    [data-theme="dark"] & {
      @apply bg-base-100/95 border-base-300/20;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
  }

  /**
   * Strong glass - more opaque
   * Used for heavy cards.
   */
  .glass-strong {
    @apply bg-base-100/95 border border-base-300;
    transform: translateZ(0);
    box-shadow: 0 12px 40px rgba(31, 38, 135, 0.12);

    [data-theme="dark"] & {
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
    }
  }

  /**
   * Subtle glass
   * Slightly more transparent, use sparingly on scrollable areas.
   */
  .glass-subtle {
    @apply bg-base-100/90 border border-base-300/30;
    /* No backdrop-filter to ensure speed */
    box-shadow: 0 4px 24px rgba(31, 38, 135, 0.06);

    [data-theme="dark"] & {
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
    }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GRADIENT OVERLAYS (UNCHANGED)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  .gradient-overlay {
    @apply relative;

    &::before {
      content: '';
      @apply absolute inset-0 pointer-events-none rounded-[inherit];
      background: linear-gradient(135deg, #87CEEB 0%, #4A90E2 50%, #00008B 100%);
      opacity: 0.05;
    }
  }

  .gradient-overlay-strong {
    @apply relative;

    &::before {
      content: '';
      @apply absolute inset-0 pointer-events-none rounded-[inherit];
      background: linear-gradient(135deg, #87CEEB 0%, #4A90E2 50%, #00008B 100%);
      opacity: 0.15;
    }
  }

  .gradient-border {
    @apply relative bg-clip-padding;
    border: 2px solid transparent;
    background-image:
            linear-gradient(rgb(var(--color-base-100)), rgb(var(--color-base-100))),
            linear-gradient(135deg, #87CEEB, #4A90E2, #00008B);
    background-origin: border-box;
    background-clip: padding-box, border-box;

    [data-theme="dark"] & {
      background-image:
              linear-gradient(rgb(var(--color-base-100)), rgb(var(--color-base-100))),
              linear-gradient(135deg, #38bdf8, #0284c7, #082f49);
    }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GRADIENT TEXT (UNCHANGED)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  .text-gradient-blue {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, #87CEEB 0%, #4A90E2 50%, #00008B 100%);
  }

  .text-gradient-subtle {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
  }

  .text-gradient-animated {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(
                    90deg,
                    #87CEEB 0%,
                    #4A90E2 25%,
                    #00008B 50%,
                    #4A90E2 75%,
                    #87CEEB 100%
    );
    background-size: 200% auto;
    animation: gradient-shift 3s linear infinite;
  }

  @keyframes gradient-shift {
    0% {
      background-position: 0% center;
    }
    100% {
      background-position: 200% center;
    }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CARD EFFECTS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  .card-glass {
    @apply glass rounded-xl p-6;
  }

  .card-gradient {
    @apply relative overflow-hidden rounded-xl p-6;
    background: linear-gradient(135deg, #87CEEB 0%, #4A90E2 50%, #00008B 100%);
    /* Removed expensive blur on ::before, just use opacity */
    &::before {
      content: '';
      @apply absolute inset-0 opacity-90;
      background: inherit;
    }
    color: white;
  }

  .card-glass-elevated {
    @apply glass-strong rounded-xl p-6;
    box-shadow:
            0 4px 16px rgba(31, 38, 135, 0.1),
            0 8px 32px rgba(31, 38, 135, 0.08);

    [data-theme="dark"] & {
      box-shadow:
              0 4px 16px rgba(0, 0, 0, 0.3),
              0 8px 32px rgba(0, 0, 0, 0.2);
    }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     BACKDROP EFFECTS (EXCEPTIONS)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  /**
   * Modal/Dialog backdrop
   * KEPT BLUR: Because modals don't scroll, they are safe.
   */
  .backdrop-blur-modal {
    @apply backdrop-blur-sm backdrop-saturate-150;
    backdrop-filter: blur(8px) brightness(0.95);

    [data-theme="dark"] & {
      backdrop-filter: blur(8px) brightness(0.5);
    }
  }

  /**
   * Sidebar backdrop
   * REDUCED BLUR: Sidebars might be over scrollable content.
   */
  .backdrop-blur-sidebar {
    @apply backdrop-blur-sm;
    /* blur(4px) is much cheaper than blur(12px) */
    backdrop-filter: blur(4px) brightness(0.98);

    [data-theme="dark"] & {
      backdrop-filter: blur(4px) brightness(0.75);
    }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SHINE/SHIMMER EFFECTS (UNCHANGED)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  .shimmer {
    @apply relative overflow-hidden;

    &::after {
      content: '';
      @apply absolute inset-0;
      background: linear-gradient(
                      90deg,
                      transparent 0%,
                      rgba(255, 255, 255, 0.3) 50%,
                      transparent 100%
      );
      animation: shimmer 2s infinite;
    }
  }

  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  .glow-on-hover {
    @apply transition-all duration-300;

    &:hover {
      box-shadow:
              0 0 20px rgba(14, 165, 233, 0.4),
              0 0 40px rgba(14, 165, 233, 0.2);
    }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PERFORMANCE OPTIMIZATION
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  .will-change-blur {
    will-change: backdrop-filter;
  }

  .will-change-transform {
    will-change: transform;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SHADOW EFFECTS (UNCHANGED)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  .shadow-glass-elevated {
    box-shadow:
            0 1px 3px 0 rgba(31, 38, 135, 0.15),
            0 10px 24px -4px rgba(31, 38, 135, 0.12),
            0 16px 40px -8px rgba(31, 38, 135, 0.10);

    [data-theme="dark"] & {
      box-shadow:
              0 1px 3px 0 rgba(100, 150, 255, 0.20),
              0 10px 24px -4px rgba(100, 150, 255, 0.16),
              0 16px 40px -8px rgba(100, 150, 255, 0.12);
    }
  }

  .shadow-glass-soft {
    box-shadow:
            0 1px 2px 0 rgba(31, 38, 135, 0.06),
            0 4px 12px -2px rgba(31, 38, 135, 0.05),
            0 8px 24px -4px rgba(31, 38, 135, 0.04);

    [data-theme="dark"] & {
      box-shadow:
              0 1px 2px 0 rgba(100, 150, 255, 0.08),
              0 4px 12px -2px rgba(100, 150, 255, 0.06),
              0 8px 24px -4px rgba(100, 150, 255, 0.05);
    }
  }
}

@layer components {
  /* ... keep your component layer unchanged ... */
  .crm-card {
    /* Uses .glass-strong which is now optimized */
    @apply glass-strong rounded-xl p-6 hover:shadow-xl transition-all duration-300;
  }

  .stat-card {
    @apply relative overflow-hidden rounded-xl p-6;
    @apply bg-white dark:bg-neutral-800;
    @apply border border-neutral-200 dark:border-neutral-700;

    &::before {
      content: '';
      @apply absolute top-0 left-0 right-0 h-1;
      background: linear-gradient(90deg, #87CEEB, #4A90E2, #00008B);
    }
  }

  .hero-gradient {
    @apply relative;
    background: linear-gradient(135deg, #87CEEB 0%, #4A90E2 50%, #00008B 100%);

    &::before {
      content: '';
      @apply absolute inset-0 bg-white/10;
      /* Removed heavy blur on hero background too */
    }
  }
}
