// Table Row Styles - Modern Edition
// ============================================
@use 'variables' as *;

// Base styles for table rows - modern, clean, professional
.table-row-wrapper {
  display: contents;
  cursor: pointer;

  // Modern subtle hover effect - clean, professional (like Linear, Notion)
  // PERFORMANCE: Automatically disabled during resize via .is-resizing class
  &:hover > .table-cell {
    // Subtle, uniform background tint - no gradients
    background-color: color-mix(in srgb, theme('colors.primary') 4%, theme('colors.cardBg') 96%);

    // Slightly more visible border on hover
    border-bottom-color: color-mix(in srgb, theme('colors.primary') 20%, theme('colors.cardBorder') 80%);

    // Premium left accent bar on hover - clean, modern
    &:first-child {
      border-left: 3px solid color-mix(in srgb, theme('colors.primary') 80%, transparent 20%);
      padding-left: calc(#{$table-cell-padding-x} - 3px);
    }

    // Disable default hover when custom row styling is applied
    &[data-custom-row="true"] {
      background-color: inherit;
      border-bottom-color: color-mix(in srgb, theme('colors.cardBorder') 100%, transparent 0%);

      // Keep accent bar for first cell even with custom row color
      &:first-child {
        border-left: 3px solid theme('colors.primary');
        padding-left: calc(#{$table-cell-padding-x} - 3px);
      }
    }
  }

  // PERFORMANCE: Disable hover effects during resize
  .table-grid.is-resizing &:hover > .table-cell {
    background: none;
    border-bottom-color: rgb(var(--color-base-300) / 0.3);

    &:first-child {
      border-left: none;
      padding-left: $table-cell-padding-x;
    }
  }

  // Active/clicked state - subtle press effect
  &:active > .table-cell {
    background-color: color-mix(in srgb, theme('colors.primary') 6%, theme('colors.cardBg') 94%);
    transform: scale(0.998); // Subtle press down effect
  }

  // Disabled state - clear visual feedback
  &--disabled {
    cursor: not-allowed;
    opacity: $opacity-disabled;

    &:hover > .table-cell {
      background-color: theme('colors.cardBg'); // No hover when disabled
    }
  }

  // Selected state - clean, modern with primary accent
  &--selected > .table-cell {
    // Subtle, uniform background for selected state
    background-color: color-mix(in srgb, theme('colors.primary') 8%, theme('colors.cardBg') 92%);

    // Strong accent border for selected state
    &:first-child {
      border-left: 3px solid theme('colors.primary');
      padding-left: calc(#{$table-cell-padding-x} - 3px); // Compensate for border
    }

    // Slightly bolder text for selected rows
    font-weight: $table-font-weight-medium;
  }

  // Combined selected + hover state - slightly more prominent
  &--selected:hover > .table-cell {
    background-color: color-mix(in srgb, theme('colors.primary') 10%, theme('colors.cardBg') 90%);
  }
}

// Virtual row styles
.table-row-virtual {
  display: contents;

  // Fixed height for virtualization
  & > .table-cell {
    min-height: $table-row-height;
    height: $table-row-height;
  }
}

// Expandable row (for nested/children) with smooth animations
.table-row-expandable {
  display: contents;

  // Appear animation for child rows - elegant fade + slide
  &--entering > .table-cell {
    animation: expandRowIn $transition-normal cubic-bezier(0.4, 0, 0.2, 1);
  }

  &--leaving > .table-cell {
    animation: expandRowOut $transition-normal cubic-bezier(0.4, 0, 1, 1);
  }
}

// Keyframes for expand animation - smooth, professional
@keyframes expandRowIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes expandRowOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-4px);
  }
}
